<Window x:Class="WpfApp1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfApp1"
        mc:Ignorable="d"
        Title="WPF Notify Icon Example" Closed="MainWindow_Closed" AllowDrop="True" WindowStyle="None" Background="{DynamicResource {x:Static SystemColors.ControlDarkDarkBrushKey}}" Foreground="{DynamicResource {x:Static SystemColors.ControlLightLightBrushKey}}" ResizeMode="NoResize" SizeToContent="WidthAndHeight" MouseDown="MainWindow_MouseDown" MouseMove="MainWindow_MouseMove" GotMouseCapture="MainWindow_GotMouseCapture" LostFocus="MainWindow_LostFocus" >
    <WrapPanel Height="200" Width="400" >
        <StackPanel Height="44"  Orientation="Horizontal" AutomationProperties.IsRowHeader="True" FlowDirection="RightToLeft" Width="399">
            <Button
                x:Name="CloseButton" Content="Close To Tray" Click="MainWindow_ClosedToTray" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,5,5,5" Width="100" Height="25"/>

            <Button
                x:Name="MinimizeButton" Content="Minimize" Click="MainWindow_Minimized" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="5,5,5,5" Width="80" Height="25"/>
        </StackPanel>
        <Button x:Name="TestButton" Content="Update Icon&#xD;&#xA;" RenderTransformOrigin="0.5,0.5" Width="100" Height="30" Click="TestButton_Click">
            <Button.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform/>
                    <RotateTransform/>
                    <TranslateTransform X="135"/>
                </TransformGroup>
            </Button.RenderTransform>
        </Button>
    </WrapPanel>
</Window>
